import { callNative } from '../../core/index.js';

const moduleName = 'stream';
const methodName = 'fetch';

export function request(params) {
  let {
    url, body, headers, method, cb
  } = params;

  callNative(moduleName, methodName, {
    url,
    method,
    headers,
    body,
    type: 'text'
  }, (res) => {
    /**
     * errno
     * data:
     *  status
     *  statusText
     *  data
     *  headers
     */
    const { errno, data = '' } = res;
    if (errno == 0) {
      cb(data);
    }
  });
}

request.prototype.moduleName = moduleName;
request.prototype.methodName = methodName;

